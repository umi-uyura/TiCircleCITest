machine:
  timezone: Asia/Tokyo
  environment:
    XCODE_SCHEME: TiCircleCITest
    XCODE_PROJECT: TiCircleCITest.xcodeproj
    ANDROID_HOME: /usr/local/opt/android-sdk
    ANDROID_SDK: /usr/local/opt/android-sdk
    ANDROID_NDK: /usr/local/opt/android-ndk
    ANDROID_PLATFORM: /usr/local/opt/android-sdk/platforms/android-23
    GOOGLE_APIS: /usr/local/opt/android-sdk/add-ons/addon-google_apis-google-23
    JAVA_HOME: $(/usr/libexec/java_home -v 1.8)
    PATH: /usr/local/opt/android-sdk/tools:/usr/local/opt/android-sdk/platform-tools:$JAVA_HOME/bin:$PATH

dependencies:
  pre:
    - brew tap caskroom/cask
    - brew cask install java
    - brew install n scons android-sdk android-ndk
    - android update sdk --no-ui --all --filter 1,3,4,28,105
    - echo $JAVA_HOME
    - java -version
    - ls $ANDROID_SDK
    - ls $ANDROID_NDK
    - ls $ANDROID_PLATFORM
    - ls $GOOGLE_APIS
    - which android
    - which ndk-build
    - n 4.4.5
    - npm install -g titanium tisdk
#    - tisdk build 5.2.2.GA --force

test:
  override:
    - echo Hello World
    - which node
    - which ti
    - ti info
    - ti build -p ios -b
